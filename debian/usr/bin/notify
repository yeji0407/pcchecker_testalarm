#!/usr/bin/python3
import getpass
#import gi
import subprocess
import time
import os
#import notify2


display=str(subprocess.check_output("ls /tmp/.X11-unix/* | sed 's#/tmp/.X11-unix/X##' | head -n 1",shell=True).decode().strip())
user=str(subprocess.check_output("who | grep '"+display+"' | awk '{print $1}' | head -n 1",shell=True).decode().strip())
uid=str(subprocess.check_output('id -u '+user,shell=True).decode().strip())
subprocess.call('sudo -u '+user+' DISPLAY='+display+' DBUS_SESSION_BUS_ADDRESS=unix:path=/run/user/'+uid+'/bus notify-send "PC 상태가 위험합니다."', shell=True)
